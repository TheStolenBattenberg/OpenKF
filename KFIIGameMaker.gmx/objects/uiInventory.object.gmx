<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>uiParent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Free Resources

if(surface_exists(itemSurface))
    surface_free(itemSurface);
    
uiInvList = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Custom Draw

// Background
draw_clear_alpha(c_black, 0.3);

// 3D Item
d3d_start();
{
    d3d_set_projection_ext(0, 0, -1.25, 0, 0, 0, 0, 1, 0, 60, conUI.uiW1P/conUI.uiH1P, 0.00001, -512);
    SetCullMode(CullMode.None);
    
    //Some Items are drawn with ZBuffering turned off
    //This is most definately a stinky hack.
    switch(itemItemID)
    {
        //case 71:    //BloodStone
        case 73:    //Verdite
        case 76:    //Dragon Crystal
        case 77:    //Blue Potion
        case 78:    //Pink Potion
        case 79:    //Green Potion
        case 80:    //Gold Potion
        case 82:    //Crystal Flask
        case 83:    //Figure of Seath
        case 90:    //Fire Crystal
        case 91:    //Water Crystal
        case 92:    //Earth Crystal
        case 93:    //Wind Crystal
        case 94:    //Light Crystal
        case 96:    //Crystal
        case 97:    //Crystal Shard
            d3d_set_zwriteenable(false);
        break;
    }    
    
    texture_set_stage(0, conRenderer.psxVramTexture);
    
    shader_set(shdMSM);
    
    d3d_transform_set_rotation_y(rotY);
    d3d_transform_add_translation(0, 0, -0.5);
    if(itemModel != null)
    {
        MSMDraw(itemModel);
    }
    d3d_transform_set_identity();
    
    d3d_set_zwriteenable(true);
    
    shader_reset();

    rotY--;
}
d3d_end();

d3d_set_projection_ortho(0, 0, conUI.uiW1P * 100, conUI.uiH1P * 100, 0);

// Inventory List
UIListInventoryDraw(uiInvList, conUI.uiW1P * 5, conUI.uiH1P * 63, conUI.uiW1P * 90, conUI.uiH1P * 32);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Custom Step

//Handle Getting 3D Items...
itemSelLast = itemSelCurr;
itemSelCurr = UIInventoryListGetSelected(uiInvList);

if(itemSelCurr != itemSelLast)
{
    var arrItemData = InventoryGetItemData(objPlayer.inventory, itemSelCurr);
    
    itemModel  = InventoryItemGetModel(arrItemData);
    itemItemID = InventoryItemGetItemID(arrItemData);
}

//Handle Using Items
if(InputManagerGetPressed(InputMap.Activate))
{
    var arrItemData = InventoryGetItemData(objPlayer.inventory, itemSelCurr);
    
    if(InventoryItemGetScript(arrItemData) != null)
    {
        script_execute(InventoryItemGetScript(arrItemData));
    }else
    {
        //Queue 'Nothing Happens' Message
        UIQueueMessage(LanguageGetString("uiMessage", 20));
    }
    
    //Destroy Instance
    UIDestroy(self);
    GameStateSet(GameState.Playing);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///UI 'inherited' data

stopDraw = true;    //Stop conUI drawing further back in UI stack than this.
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Custom Create

//UI Components
uiInvList = UIListInventoryCreate(objPlayer.inventory);

//3D Item
itemSurface = surface_create(256, 256);
itemSelLast = null;
itemSelCurr = null;
itemModel   = null;
itemItemID  = 0;

rotX = 0;
rotY = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
